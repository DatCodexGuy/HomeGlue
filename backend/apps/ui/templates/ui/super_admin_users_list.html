{% extends "ui/base.html" %}
{% block title %}Admin | Users{% endblock %}
{% block content %}
  <section class="panel reveal">
    {% include "ui/_crumbs_simple.html" with crumbs=crumbs %}
    <div class="listhead">
      <div>
        <h1 class="h2">Users</h1>
        <div class="sub">Superuser-only user management.</div>
      </div>
      <div class="listhead__actions">
        <a class="btn btn--ghost btn--sm" href="{% url 'ui:super_admin_home' %}">
          <svg class="ico" viewBox="0 0 24 24"><use href="#i-back"/></svg>
          Back
        </a>
      </div>
    </div>

	    <form class="search mt-10" method="get">
	      <input class="search__input" type="text" name="q" value="{{ q }}" placeholder="Filter by username/email..." />
	      <button class="btn btn--ghost btn--sm" type="submit">
	        <svg class="ico" viewBox="0 0 24 24"><use href="#i-search"/></svg>
	        Filter
	      </button>
	    </form>
	
	    <div class="table mt-12">
	      <div class="row row--head row--admin-users">
	        <div>User</div><div>Email</div><div>Flags</div>
	      </div>
	      {% for u in users %}
	        <a class="row row--admin-users" href="{% url 'ui:super_admin_user_detail' user_id=u.id %}">
	          <div class="mono">{{ u.username }}</div>
	          <div class="muted">{{ u.email }}</div>
	          <div class="muted">
	            {% if u.is_superuser %}<span class="pill pill--tiny">superuser</span>{% endif %}
            {% if not u.is_active %}<span class="pill pill--tiny pill--danger">disabled</span>{% endif %}
          </div>
        </a>
      {% empty %}
        <div class="empty">
          <div class="empty__title">No users</div>
          <div class="empty__body">No matching users found.</div>
        </div>
      {% endfor %}
    </div>
  </section>
{% endblock %}
